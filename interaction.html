<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>Interaction</title>
    
<link href="css/site.css" media="screen" rel="stylesheet" type="text/css" />
<link href="css/highlight.default.css" media="screen" rel="stylesheet" type="text/css" />
<script src="js/jquery.js"></script>
<script src="js/highlight.pack.js"></script>
<script src="js/showdown.js" type="text/javascript"></script>
<script src="js/extensions/github.js" type="text/javascript"></script>
<script src="js/main.js" type="text/javascript"></script>
<link rel="icon" type="image/x-icon" href="favicon.ico" />
</head>
<body>
<div style="display: none" id="sourcetext">

# Interaction

----

# An interactive multimodal app: PONG

Let's create a game. Let's rebuild one of the oldest and most famous computer games of all time: **PONG!**

![Pong the arcade game](http://upload.wikimedia.org/wikipedia/commons/thumb/b/b0/Atari_Pong_arcade_game_cabinet.jpg/250px-Atari_Pong_arcade_game_cabinet.jpg)

> Pong is one of the earliest arcade video games; it is a an electronic ping-pong game featuring simple two-dimensional graphics. Pong was one of the first video games to reach mainstream popularity. The game was originally manufactured by Atari Incorporated (Atari), who released it in 1972. Pong quickly became a success and is the first commercially successful video game, which led to the start of the video game industry. Pong has been referenced and parodied in multiple television shows and video games, and has been a part of several video game and cultural exhibitions. [wikipedia](http://en.wikipedia.org/wiki/Pong)

## The Game

> The player controls an in-game paddle by moving it vertically across the left side of the screen, and can compete against either a computer controlled opponent or another player controlling a second paddle on the opposing side. Players use the paddles to hit a ball back and forth. The aim is for a player to earn more points than the opponent; points are earned when one fails to return the ball to the other. [wikipedia](http://en.wikipedia.org/wiki/Pong)

[Here is an early video from 1969.](http://www.youtube.com/watch?v=XNRx5hc4gYc)
[Here is an early Atari version](http://www.youtube.com/watch?v=SHsYjWm8XSI)
[Another Atari version from 1972 with different sounds](http://www.youtube.com/watch?v=3nu_L8uEzJw)

To rebuild Pong we should analyze the important components and subcomponents, to make sure we can implement each one, until the entire game is complete. **Divide and conquer** is the foremost idiom of software design. At the most general level most games incorporate these components:

- **Game state**. (Sometimes called the **model**). The data that describes the state of the game at any moment, including the world and its objects, meta-level data such as scores and modes, resources used in rendering, and so on. 
- **Game logic/simulation**. (Sometimes called the **controller**). The **update** routine(s) that modify the game state from one step to the next. It may be composed of several subroutines for different (kinds of) objects, and may have routines that operate in parallel.
	- This includes **interaction**. The ways in which a player can add new input to the game logic as it is simulated, such as keyboard, mouse, joystick, head-tracking and other human interface devices (HIDs).
- **Rendering**. (Sometimes called the **view**). How the game is visualized and sonified. 

## Game State

The game comprises these elements:

- Two players, represented by the "paddles" on screen. 
	- Each player has a paddle that can move up and down the screen (and also left to right in the original demo)
	- That means we will also need variables to store the vertical velocity.
	- Each player also has a score.
- One ball, with variable X and Y position. 
	- The ball moves continuously until a collision occurs. 
	- That means we will also need variables to store the ball horizontal and vertical velocity.
	- (*The original design also had support for spin, or "English"*)
- Configuration parameters to tune the gameplay.

## Game logic

Most of the game dynamics come from the movement of the ball. These are the basic properties of Pong. 

- The game is played in rounds. A round starts by serving the ball, and ends by scoring a goal.
- At the start of a round, the ball begins in the center of the screen with a random direction of motion.
	- The ball moves by continual accumulation of velocity to position.
	- Exceptions to this rule depend on collision detection:
		- If the ball touches the top or bottom edge of the screen:
			- It bounces (reversing the vertical direction)
		- If the ball reaches the left edge of the screen:
			- Player 2 gains one point
			- A new round is started
		- If the ball reaches the right edge of the screen:
			- Player 1 gains one point
			- A new round is started
		- If the ball collides with the inside face of a paddle:
			- It reverses horizontal direction
			- *It speeds up slightly, to make the game get harder.*
			- *It changes vertical direction slightly, depending on which edge (top or bottom) of the paddle it collided with.*

The trickiest part of that is detecting whether the paddle has hit the ball. We can break that down into two conditions:

- The Y position is between the top and bottom edges of the paddle.
- The old X position was in front of the inside face of the paddle, and the new X position is on or behind the inside face of the paddle.

*In fact this is not quite accurate, but good enough to start with.*

## Interaction

- **Paddles**: players can move the paddles up and down the screen.    
	- For a two-player game, we'll need to use keypresses to move the paddles.
		- We can detect when a key is pressed, and modify a paddle velocity according to what key it is.
		- We can detect key release set the paddle velocity back to zero.
		- Or we could use mouse interaction
	- We also need to invent one or more algorithms for the computer's playing style... 
		- It should play better than random, but worse than perfect! 
	- Paddles should also be restricted from reaching the top or bottom of the screen.
		- *In the real Pong game, they couldn't even quite reach the edge, so there was always a chance to score against a pro.*
- Options: we might want to use other keypresses to choose options:
	- A key to reset the game & scores to zero
	- A key to pause the game
	- Whether to play 2-player mode or 1-player versus computer? Or detect that automatically by lack of keypresses?

## Rendering Pong

The rendering of the original Pong is incredibly simple, made entirely of large black or white squares, to represent the essential elements of paddles (players) and the ball. 

The sounds of Pong (if present at all) were similarly simple, reflecting the available technology of the day. Wwe might want to try rendering in a more elaborate style. Our game sounds could include a combination of: 

- A background music track 
- Triggered sound events:
	- When a round begins
	- When the ball collides with walls
	- When the ball collides with a player paddle
	- When a goal is scored

## Assignment: Elaborating Pong

We quickly sketched up a working version of Pong in class:
https://github.com/grrrwaaa/gct633/blob/master/classfiles/oct29.lua (If you pull the latest copy of the class software, you will have this file already). 

The task of this assignment is to elaborate, mutate or otherwise rewrite Pong in two or more interesting ways. We began to explore some possible directions in class, but whether you follow them or implement your own ideas, try to take them as far as possible in the time available; and enjoy exploring! Perhaps it will evolve into an entirely new game; perhaps it won't even be a game anymore... We can discuss your ideas during class, in office hours, or by email. 

### Grading

This is a bigger assignment than the previous ones, and contributes 3x more to your grade; please dedicate more time to it accordingly. And have fun doing it! Grading will take into account the creativity/novelty of your ideas, the technical execution of them, and the aesthetic/perceptual quality of the result. You may be asked to present your game to the class.

### Submission details

If your project uses more than one file, please remember to upload them all. If you use sound files, make sure that they are not more than a few seconds long, and upload them too. 

You must comment your code thoroughly. At the top of your main script please include a long comment that includes:

- A description of your project idea(s)
- An explanation of how to use it (what the interaction is, how the gameplay works)
- Your strategy to implement your ideas, and any challenges you had implementing them
- Your ideas for how it could be taken further in future work (*important!*)

In addition, there should also be a comments throughout the code:

- For each function, to explain what it does 
- Comments over any complex or important lines in the code
- Comments to note where there might be possible errors
- Comments to indicate where possible future work could be added ("TODO" comments)

Remember: good code formatting and commenting is part of the technical execution. Code is for humans as well as machines!

### Example ideas:

- Sound:
	- Using more interesting sounds!
	- Using more game feature parameters to modify the sound synthesis, e.g. the angle of bounce, speed, etc.
	- Adding a backing track (like the drum machine) that dynamically adapts to the gameplay 
		- e.g. setting the tempo according to the ball speed
	- Adding sound effects on the sounds: echoes, distortions etc.
- Ball:
	- Adding nonlinear movements, like "spin" ("English")
	- Pong with multiple balls!
	- Adding a gravitational field with black holes to influence the ball
- Paddles:
	- Adding paddle rotation
	- Changing paddle size (or shape) according to the current score
	- Sticky paddles
	- Multiple paddles in flocking formations
	- Paddles that reproduce and die
- World:
	- More obstacles in the space
	- Adding portals (quantum-tunneling pong!)
- Time:
	- Making the ball move in rhthmic bouncing jumps instead of a smooth line
	- Extra paddles that follow your movement with delay
	- Extra points for scoring a goal 'on the beat' of the rhythm
	- Pong with different rules and systems on each 'level' (each subsequent round of the game)
- AI: 
	- Different NPC player 'personalities'	
	- An opponent that learns from you?
- Visual:
	- More complex geometry in the VBO
	- Pong in 3D space...

[For inspiration: taking pong way too far...](http://www.youtube.com/watch?v=NDjseVmruH8)

-----

# Sound toys

Sound toys are small applications with interactive visual interfaces that generate sound. Some are desktop apps, some are web apps, and in recent years there have been many mobile apps (often reconstructing earlier desktop or browser based works). Some are more like instruments, some are more like games, some are more like interactive media artworks, or audio-visual paintings, others are not easily categorized. They are a useful medium for us to explore, as they are often quite interesting in behavior despite the simplicity of design. Often they use drawing input, simple physical simulations, network or agent systems in the creation of interesting interfaces and behavior.

- One of the oldest selections of web-based soundtoys is at [www.soundtoys.net](http://www.soundtoys.net/), though some of them don't work on modern browsers.
- A more recent selection is at [creative applications net](http://www.creativeapplications.net/tag/soundtoy/)
- A pioneering collection of sound toy experiments is the [ixi software collection](http://www.ixi-audio.net/content/software.html). They might not work on your OS, but the do include the source code.
	- An academic treatment by one of the authors: [ixi software: The Interface as Instrument](http://www.ixi-software.net/thor/ixi_software.pdf).
- Snibbe studio reconstructed several earlier works for iOS, such as [bubbleharp](http://www.snibbestudio.com/bubbleharp/)
- An interesting variation is taken by [Nodal](http://www.csse.monash.edu.au/~cema/nodal/)
	- [Academic paper](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.146.2797)
- Another popular example on iOS is [Soundrop](https://itunes.apple.com/en/app/soundrop/id364871590?mt=8)

## Sounddrop

If we take the last example ([Soundrop](https://itunes.apple.com/en/app/soundrop/id364871590?mt=8)), we can break this down into different components and problems to solve just as we did for Pong:

- Simulation:
	- A moving ball
		- Position and velocity 
		- With force of gravity
			- Also need forces (acceleration)
		- Bouncing of surfaces at different angles
			- Collision test: intersection of ball-path with surface
			- Collision effect: calculate change in forces and new ball position
	- Many surfaces, many balls
		- Balls generated periodically at one location
		- Balls removed if they fly off the screen sides or bottom
- Rendering:
	- Balls
	- Surfaces (endpoints and connection)
	- Sound: triggered by ball-surface collisions make sound
		- The pitch appears to depend on the ball velocity
- Interaction: 
	- Adding a surface
		- Drawing gesture: mouse start and end positions
	- Removing a surface
		- Selecting a surface (with double-click or keydown?)
		- Requires mouse/surface collision test
	- Moving surface endpoint
		- Selecting endpoint and dragging
		- Requires mouse/endpoint collision test
	- Moving the ball generator
		- Selecting generator and dragging
		- Requires mouse/generator collision test
	
</div>
<div id="wrapper">
	<div class="header">
		<h1>GCT 633</h1>
		<a href="index.html">Overview</a><br/>
		<a href="time.html">Time</a><br/>
		<a href="space.html">Space</a><br/>
		<a href="programming.html">Programming</a><br/>
		<a href="audio.html">Audio</a><br/>
		<a href="graphics.html">Graphics</a><br/>
		<a href="interaction.html">Interaction</a><br/>
		<a href="lua.html">Lua Tutorial</a><br/>
		<a href="docs/index.html">&gt;&gt; Reference</a><br/>
		<a href="http://github.com/grrrwaaa/gct633">&gt;&gt; GitHub</a><br/>
	</div>
	<div class="section">
		<script type="text/javascript">
		//var converter = new Markdown.Converter();
		var converter = new Showdown.converter({ extensions: "g" });
		document.write(converter.makeHtml($('#sourcetext').text()));
		</script>
	</div>	
	<div class="footer">
		<img src="img/snake6_small.jpg" alt="Graham Wakefield"><br/>
		Graham Wakefield, 2013</div>
	</div>
</body>
</html>